FROM alpine:latest

WORKDIR /app

# Install necessary tools
RUN apk add --no-cache wget

# Copy the entire pocketbase directory from your project
COPY pocketbase /app/pocketbase

# Make the startup script executable
COPY scripts/start-pocketbase.sh ./
RUN chmod +x start-pocketbase.sh

# Create necessary directories with proper permissions
RUN mkdir -p /app/pocketbase/pb_data && \
    chmod -R 755 /app/pocketbase

EXPOSE 8090

CMD ["./start-pocketbase.sh"]
